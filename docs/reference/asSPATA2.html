<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Transform miscellaneous objects to SPATA2 objects — asSPATA2 • SPATA2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Transform miscellaneous objects to SPATA2 objects — asSPATA2"><meta property="og:description" content="This S4 generic converts miscellaneous objects into a SPATA2 object,
transferring relevant data and metadata."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SPATA2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../articles/spata-data.html">SPATAData</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Initiating a SPATA2 object</li>
    <li>
      <a href="../articles/initiation-and-preprocessing-customized.html">Initiation &amp; Preprocessing with individual data</a>
    </li>
    <li>
      <a href="../articles/initiation-and-preprocessing-merfish.html">Initiation &amp; Preprocessing with MERFISH data</a>
    </li>
    <li>
      <a href="../articles/initiation-and-preprocessing-visium.html">Initiation &amp; Preprocessing with Visium data</a>
    </li>
    <li>
      <a href="../articles/initiation-and-preprocessing-visium-hd.html">Initiation &amp; Preprocessing with VisiumHD data</a>
    </li>
    <li class="dropdown-header">Basic Manipulation of a SPATA2 object</li>
    <li>
      <a href="../articles/adding-data.html">Adding Data to SPATA2 objects</a>
    </li>
    <li>
      <a href="../articles/package-compatibility.html">Platform Compatibility</a>
    </li>
    <li>
      <a href="../articles/molecular-variables.html">Molecular Variables</a>
    </li>
    <li>
      <a href="../articles/image-handling.html">Image Handling</a>
    </li>
    <li>
      <a href="../articles/spatial-segmentation.html">Spatial Segmentation</a>
    </li>
    <li class="dropdown-header">Implemented Algorithms &amp; Concepts</li>
    <li>
      <a href="../articles/cnv.html">Copy Number Variations</a>
    </li>
    <li>
      <a href="../articles/clustering.html">Clustering</a>
    </li>
    <li>
      <a href="../articles/dimensional-reduction.html">Dimensional Reduction</a>
    </li>
    <li>
      <a href="../articles/dea.html">Differential Expression</a>
    </li>
    <li>
      <a href="../articles/gsea.html">Gene Set Enrichment</a>
    </li>
    <li>
      <a href="../articles/spatial-measures.html">Spatial Measures</a>
    </li>
    <li class="dropdown-header">Spatial Gradient Screening</li>
    <li>
      <a href="../articles/creating-spatial-annotations.html">Creating Spatial Annotations</a>
    </li>
    <li>
      <a href="../articles/using-spatial-annotations.html">Using Spatial Annotations</a>
    </li>
    <li>
      <a href="../articles/spatial-annotation-screening.html">Spatial Annotation Screening</a>
    </li>
    <li>
      <a href="../articles/creating-spatial-trajectories.html">Creating Spatial Trajectories</a>
    </li>
    <li>
      <a href="../articles/spatial-trajectory-screening.html">Spatial Trajectory Screening</a>
    </li>
    <li class="dropdown-header">Visualization</li>
    <li>
      <a href="../articles/plotting-surface.html">Surface Plotting</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/newslog.html">Newslog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Transform miscellaneous objects to SPATA2 objects</h1>

    <div class="hidden name"><code>asSPATA2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This S4 generic converts miscellaneous objects into a <code>SPATA2</code> object,
transferring relevant data and metadata.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">asSPATA2</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'giotto'</span></span>
<span><span class="fu">asSPATA2</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">sample_name</span>,</span>
<span>  <span class="va">coordinates</span>,</span>
<span>  <span class="va">image_ebi</span>,</span>
<span>  <span class="va">spatial_method</span>,</span>
<span>  transfer_meta_data <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Seurat'</span></span>
<span><span class="fu">asSPATA2</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">sample_name</span>,</span>
<span>  platform <span class="op">=</span> <span class="st">"Undefined"</span>,</span>
<span>  square_res <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  assay_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  assay_modality <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  img_name <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  img_scale_fct <span class="op">=</span> <span class="st">"lowres"</span>,</span>
<span>  transfer_meta_data <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  transfer_dim_red <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  dim_red_naming <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pca <span class="op">=</span> <span class="st">"pca"</span>, tsne <span class="op">=</span> <span class="st">"tsne"</span>, umap <span class="op">=</span> <span class="st">"umap"</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>Objects of classes for which a method has been defined.</p></dd>


<dt id="arg-sample-name">sample_name<a class="anchor" aria-label="anchor" href="#arg-sample-name"></a></dt>
<dd><p>Character. The name of the sample.</p></dd>


<dt id="arg-transfer-meta-data">transfer_meta_data<a class="anchor" aria-label="anchor" href="#arg-transfer-meta-data"></a></dt>
<dd><p>Logical. If TRUE, the metadata will be transferred. Default is TRUE.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical. If TRUE, progress messages will be printed. Default is TRUE.</p></dd>


<dt id="arg-platform">platform<a class="anchor" aria-label="anchor" href="#arg-platform"></a></dt>
<dd><p>Character. The platform used for the experiment. Should be one
of <code>names(spatial_methods)</code>.</p></dd>


<dt id="arg-assay-name">assay_name<a class="anchor" aria-label="anchor" href="#arg-assay-name"></a></dt>
<dd><p>Character. The name of the Seurat assay containing the matrices of interest.
If NULL, Seurat's default assay is used.</p></dd>


<dt id="arg-assay-modality">assay_modality<a class="anchor" aria-label="anchor" href="#arg-assay-modality"></a></dt>
<dd><p>Character or <code>NULL</code>. The <a href="concept_molecular_modalities.html">molecular modality</a>
modality of the assay data (e.g., "gene"). If <code>NULL</code>, not provided the input for <code>assay_name</code> is used
as the molecular modality. This, however, is suboptimal and will likely result in many incompatibilities
in downstream analysis. We recommend to specifiy this argument.</p></dd>


<dt id="arg-img-name">img_name<a class="anchor" aria-label="anchor" href="#arg-img-name"></a></dt>
<dd><p>Character. The name of the image in the Seurat object to be transferred.
If NULL, the function will attempt to use the only available image or throw an error if multiple images are found.</p></dd>


<dt id="arg-img-scale-fct">img_scale_fct<a class="anchor" aria-label="anchor" href="#arg-img-scale-fct"></a></dt>
<dd><p>Character. The scale factor to use for image scaling if the Seurat object
contains data from Visium. Depending on the image loaded in the Seurat object should likely
be either <em>'lowres'</em> or  <em>'hires'</em>.</p></dd>


<dt id="arg-transfer-dim-red">transfer_dim_red<a class="anchor" aria-label="anchor" href="#arg-transfer-dim-red"></a></dt>
<dd><p>Logical. If TRUE, dimensionality reduction data (PCA, t-SNE, UMAP) will be transferred. Default is TRUE.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>SPATA2</code> object containing the converted data.</p>
    </div>
    <div id="from-seurat">
    <h2>From <code>Seurat</code></h2>


<p>The <code>asSPATA2</code> method transforms a <code>Seurat</code> object into a <code>SPATA2</code> object, preserving and adapting key data elements such as assays, images, metadata, and dimensional reduction data. Below are the specifics of the transformation process:</p>
<ul><li><p><strong>Assays</strong>:</p><ul><li><p><strong>Input</strong>: The assay to be transferred is specified via the <code>assay_name</code> parameter.
If <code>assay_name</code> is not provided, the active assay of the Seurat object is used.</p></li>
<li><p><strong>Molecular modality</strong>: In SPATA2 every assay is associated with
a  <a href="concept_molecular_modalities.html">molecular modality</a>. If argument <code>assay_modality</code> is not provided,
the input for <code>assay_name</code> is used as the molecular modality. This, however, is suboptimal and will result
in many incompatibilities downstream.</p></li>
</ul></li>
<li><p><strong>Images</strong>:</p><ul><li><p><strong>Input</strong>: The spatial image is selected using the <code>img_name</code> parameter. If not specified,
the method chooses the sole available image or prompts for selection if multiple images exist.</p></li>
<li><p><strong>Scale factors</strong>: If the of the <code>Seurat</code> object contains scale factors
with which the coordinates must be scaled to align with the image specify the
respective scale factor name in <code>scale_with</code>.</p></li>
</ul></li>
<li><p><strong>Metadata</strong>:</p><ul><li><p><strong>Input</strong>: Observational metadata is transferred if <code>transfer_meta_data = TRUE</code> (the default)
and picked from @meta.data from the <code>Seurat</code> object.</p></li>
</ul></li>
<li><p><strong>Dimensional Reduction Data</strong>:</p><ul><li><p><strong>Input</strong>: Dimensional reduction embeddings (PCA, t-SNE, UMAP) are transferred if <code>transfer_dim_red = TRUE</code> (the default). The data must be stored in the Seurat object's <code>reductions</code> slot with specific naming conventions:</p><ul><li><p><strong>PCA</strong>: Expected in <code>reductions$pca</code>, with columns named <code>PC_1</code>, <code>PC_2</code>, etc., which are renamed to <code>PC1</code>, <code>PC2</code>, etc., in SPATA2.</p></li>
<li><p><strong>t-SNE</strong>: Expected in <code>reductions$tsne</code>, with columns named <code>tSNE_1</code>, <code>tSNE_2</code>, renamed to <code>tsne1</code>, <code>tsne2</code> in SPATA2.</p></li>
<li><p><strong>UMAP</strong>: Expected in <code>reductions$umap</code>, with columns named <code>UMAP_1</code>, <code>UMAP_2</code>, renamed to <code>umap1</code>, <code>umap2</code> in SPATA2.</p></li>
</ul></li>
<li><p><strong>Naming</strong>: These embeddings must follow the specific naming conventions for compatibility with SPATA2's visualization and analysis functions.
If the embeddings are not found or named incorrectly, warnings are issued. <code>dim_red_naming</code> can be used to adjust what the function expects.</p></li>
</ul></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span></span>
<span><span class="co"># ----- example for Seurat conversion</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://themilolab.com/" class="external-link">SPATA2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://satijalab.org/seurat" class="external-link">Seurat</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.satijalab.org/seurat" class="external-link">SeuratData</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># unhash and run the command, if not installed yet</span></span>
<span><span class="co"># SeuratData::InstallData("stxBrain")</span></span>
<span></span>
<span><span class="va">brain</span> <span class="op">&lt;-</span> <span class="fu">SeuratData</span><span class="fu">::</span><span class="fu"><a href="https://satijalab.org/seurat/reference/LoadData.html" class="external-link">LoadData</a></span><span class="op">(</span><span class="st">"stxBrain"</span>, type <span class="op">=</span> <span class="st">"anterior1"</span><span class="op">)</span></span>
<span><span class="va">brain</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://satijalab.org/seurat/reference/SCTransform.html" class="external-link">SCTransform</a></span><span class="op">(</span><span class="va">brain</span>, assay <span class="op">=</span> <span class="st">"Spatial"</span><span class="op">)</span></span>
<span><span class="va">brain</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://satijalab.org/seurat/reference/RunPCA.html" class="external-link">RunPCA</a></span><span class="op">(</span><span class="va">brain</span>, assay <span class="op">=</span> <span class="st">"SCT"</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">brain</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://satijalab.org/seurat/reference/FindNeighbors.html" class="external-link">FindNeighbors</a></span><span class="op">(</span><span class="va">brain</span>, reduction <span class="op">=</span> <span class="st">"pca"</span>, dims <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">brain</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://satijalab.org/seurat/reference/FindClusters.html" class="external-link">FindClusters</a></span><span class="op">(</span><span class="va">brain</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">brain</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://satijalab.org/seurat/reference/RunUMAP.html" class="external-link">RunUMAP</a></span><span class="op">(</span><span class="va">brain</span>, reduction <span class="op">=</span> <span class="st">"pca"</span>, dims <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use assay Spatial</span></span>
<span><span class="va">spata_object1</span> <span class="op">&lt;-</span></span>
<span> <span class="fu">asSPATA2</span><span class="op">(</span></span>
<span>   object <span class="op">=</span> <span class="va">brain</span>,</span>
<span>   sample_name <span class="op">=</span> <span class="st">"mouse_brain"</span>,</span>
<span>   platform <span class="op">=</span> <span class="st">"VisiumSmall"</span>,</span>
<span>   img_name <span class="op">=</span> <span class="st">"anterior1"</span>,</span>
<span>   img_scale_fct <span class="op">=</span> <span class="st">"lowres"</span>,</span>
<span>   assay_name <span class="op">=</span> <span class="st">"Spatial"</span>,</span>
<span>   assay_modality <span class="op">=</span> <span class="st">"gene"</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a></span><span class="op">(</span><span class="va">spata_object1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use assay SCT</span></span>
<span><span class="va">spata_object2</span> <span class="op">&lt;-</span></span>
<span> <span class="fu">asSPATA2</span><span class="op">(</span></span>
<span>   object <span class="op">=</span> <span class="va">brain</span>,</span>
<span>   sample_name <span class="op">=</span> <span class="st">"mouse_brain"</span>,</span>
<span>   platform <span class="op">=</span> <span class="st">"VisiumSmall"</span>,</span>
<span>   img_name <span class="op">=</span> <span class="st">"anterior1"</span>,</span>
<span>   img_scale_fct <span class="op">=</span> <span class="st">"lowres"</span>,</span>
<span>   assay_name <span class="op">=</span> <span class="st">"SCT"</span>,</span>
<span>   assay_modality <span class="op">=</span> <span class="st">"gene"</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/methods/show.html" class="external-link">show</a></span><span class="op">(</span><span class="va">spata_object2</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># with Seurat</span></span>
<span><span class="fu"><a href="https://satijalab.org/seurat/reference/SpatialPlot.html" class="external-link">SpatialFeaturePlot</a></span><span class="op">(</span><span class="va">brain</span>, <span class="st">"nCount_Spatial"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># with SPATA2</span></span>
<span><span class="fu"><a href="plotSurface.html">plotSurface</a></span><span class="op">(</span><span class="va">spata_object1</span>, <span class="st">"nCount_Spatial"</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jan Kueckelhaus, Dieter-Henrik Heiland.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

