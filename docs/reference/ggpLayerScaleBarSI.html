<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Add a scale bar in SI units — ggpLayerScaleBarSI • SPATA2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Add a scale bar in SI units — ggpLayerScaleBarSI"><meta property="og:description" content="Adds a scale bar to the surface plot that visualizes
distance in SI units."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SPATA2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.1.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/installation.html">Installation</a>
</li>
<li>
  <a href="../articles/spata-data.html">SPATAData</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Initiating a SPATA2 object</li>
    <li>
      <a href="../articles/initiation-and-preprocessing-customized.html">Initiation &amp; Preprocessing with individual data</a>
    </li>
    <li>
      <a href="../articles/initiation-and-preprocessing-merfish.html">Initiation &amp; Preprocessing with MERFISH data</a>
    </li>
    <li>
      <a href="../articles/initiation-and-preprocessing-visium.html">Initiation &amp; Preprocessing with Visium data</a>
    </li>
    <li>
      <a href="../articles/initiation-and-preprocessing-visium-hd.html">Initiation &amp; Preprocessing with VisiumHD data</a>
    </li>
    <li class="dropdown-header">Basic Manipulation of a SPATA2 object</li>
    <li>
      <a href="../articles/adding-data.html">Adding Data to SPATA2 objects</a>
    </li>
    <li>
      <a href="../articles/package-compatibility.html">Platform Compatibility</a>
    </li>
    <li>
      <a href="../articles/molecular-variables.html">Molecular Variables</a>
    </li>
    <li>
      <a href="../articles/image-handling.html">Image Handling</a>
    </li>
    <li>
      <a href="../articles/spatial-segmentation.html">Spatial Segmentation</a>
    </li>
    <li class="dropdown-header">Implemented Algorithms &amp; Concepts</li>
    <li>
      <a href="../articles/cnv.html">Copy Number Variations</a>
    </li>
    <li>
      <a href="../articles/clustering.html">Clustering</a>
    </li>
    <li>
      <a href="../articles/dimensional-reduction.html">Dimensional Reduction</a>
    </li>
    <li>
      <a href="../articles/dea.html">Differential Expression</a>
    </li>
    <li>
      <a href="../articles/gsea.html">Gene Set Enrichment</a>
    </li>
    <li>
      <a href="../articles/spatial-measures.html">Spatial Measures</a>
    </li>
    <li class="dropdown-header">Spatial Gradient Screening</li>
    <li>
      <a href="../articles/creating-spatial-annotations.html">Creating Spatial Annotations</a>
    </li>
    <li>
      <a href="../articles/using-spatial-annotations.html">Using Spatial Annotations</a>
    </li>
    <li>
      <a href="../articles/spatial-annotation-screening.html">Spatial Annotation Screening</a>
    </li>
    <li>
      <a href="../articles/creating-spatial-trajectories.html">Creating Spatial Trajectories</a>
    </li>
    <li>
      <a href="../articles/spatial-trajectory-screening.html">Spatial Trajectory Screening</a>
    </li>
    <li class="dropdown-header">Visualization</li>
    <li>
      <a href="../articles/plotting-surface.html">Surface Plotting</a>
    </li>
  </ul></li>
<li>
  <a href="../articles/newslog.html">Newslog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Add a scale bar in SI units</h1>

    <div class="hidden name"><code>ggpLayerScaleBarSI.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Adds a scale bar to the surface plot that visualizes
distance in SI units.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ggpLayerScaleBarSI</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  sb_dist <span class="op">=</span> <span class="st">"1mm"</span>,</span>
<span>  sb_pos <span class="op">=</span> <span class="st">"bottom_right"</span>,</span>
<span>  sb_alpha <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sb_color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  sgmt_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sgmt_type <span class="op">=</span> <span class="st">"solid"</span>,</span>
<span>  text_nudge_x <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  text_nudge_y <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  text_pos <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  text_size <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  xrange <span class="op">=</span> <span class="fu"><a href="getCoordsRange.html">getCoordsRange</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">$</span><span class="va">x</span>,</span>
<span>  yrange <span class="op">=</span> <span class="fu"><a href="getCoordsRange.html">getCoordsRange</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span><span class="op">$</span><span class="va">y</span>,</span>
<span>  offset <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">0.8</span><span class="op">)</span>,</span>
<span>  theme_opt <span class="op">=</span> <span class="st">"none"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An object of class <code><a href="SPATA2.html">SPATA2</a></code> or, in case of S4 generics,
objects of classes for which a method has been defined.</p></dd>


<dt id="arg-sb-dist">sb_dist<a class="anchor" aria-label="anchor" href="#arg-sb-dist"></a></dt>
<dd><p>The distance in SI units that the scale bar
illustrates (e.g. <em>'1mm'</em>, <em>'200um'</em>). Must not be bigger than
the range of the image of the plot.</p></dd>


<dt id="arg-sb-pos">sb_pos<a class="anchor" aria-label="anchor" href="#arg-sb-pos"></a></dt>
<dd><p>Character value or vector of length two.</p>
<p>If character, one of <em>top_right</em>, <em>top_left</em>, <em>bottom_right</em> or <em>bottom_left</em>.
The scale bar is positioned accordingly.</p>
<p>If vector of length two, distance measures that specify the positioning of
the segment. Text is lifted slightly to hover above. First value sets
positioning on the x- and second value sets positioning on the y-axis.</p></dd>


<dt id="arg-sb-color">sb_color<a class="anchor" aria-label="anchor" href="#arg-sb-color"></a></dt>
<dd><p>The color in which the scale bar is displayed.</p></dd>


<dt id="arg-sgmt-size-sgmt-type">sgmt_size, sgmt_type<a class="anchor" aria-label="anchor" href="#arg-sgmt-size-sgmt-type"></a></dt>
<dd><p>Affect the appearance of the segment. <code>sgmt_type</code>
should be one of <code>validLineTypes()</code>.</p></dd>


<dt id="arg-text-nudge-x-text-nudge-y">text_nudge_x, text_nudge_y<a class="anchor" aria-label="anchor" href="#arg-text-nudge-x-text-nudge-y"></a></dt>
<dd><p>Numeric value or <code>NULL</code>. Moves the scale bar
along the axis in pixel units. If <code>NULL</code>, nudging is computed based on the input
of <code>yrange</code>.</p></dd>


<dt id="arg-text-pos">text_pos<a class="anchor" aria-label="anchor" href="#arg-text-pos"></a></dt>
<dd><p>Numeric vector of length two or <code>NULL</code>. If numeric, sets the
position of the scale bar text precisely. <code>text_nudge_x</code> and <code>text_nudge_y</code>
is still applied.</p></dd>


<dt id="arg-xrange-yrange">xrange, yrange<a class="anchor" aria-label="anchor" href="#arg-xrange-yrange"></a></dt>
<dd><p>The range of the image that is considered if the positioning
of the scale is calculated via <code>sb_pos</code> as one of <em>top_right</em>, <em>top_left</em>, <em>bottom_right</em>
or <em>bottom_left</em>. Defaults to the image range.</p></dd>


<dt id="arg-offset">offset<a class="anchor" aria-label="anchor" href="#arg-offset"></a></dt>
<dd><p>Numeric vector of length two. Used to move the position of
the scale bar away from the center. Values should range from 0 to 1. First
value is used to move along the x-axis. Second value is used for the y-axis.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>ggpLayer*()</code>-functions return lists of <code>ggproto</code> objects
that can be added to ggplots via the <code>+</code> operator. In most of the cases
they are supposed to be added to plots created with the <code>plotSurface*()</code>
family.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The scale bar consists of two graphical objects. The segment of the
scale bar is plotted with <code><a href="geom_segment_fixed.html">geom_segment_fixed()</a></code>. The text of the scale bar is
plotted with <code><a href="geom_text_fixed.html">geom_text_fixed()</a></code>.</p>
<p>If <code>sb_pos</code> is one of <em>top_right</em>, <em>top_left</em>, <em>bottom_right</em>
or <em>bottom_left</em>, the position of the scale bar is computed in combination
with the input for argument <code>offset</code>. Argument <code>offset</code> is used to repel
the scale bar away from the center into the corner specified in <code>sb_pos</code>. Thus,
if <code>offset = c(0,0)</code>, the scale bar is positioned in the center of the plot
regardless of the specification of <code>sb_pos</code>. Offset values specify the percentage
of the distance between the center of the plot and its limits. For instance,
if <code>sb_pos = c(0.5, 0.75)</code> and <code>sb_pos = 'top_right'</code> the scale bar is moved
to the right (50% of the distance between the center the limits of the x-axis)
and to the top (75% of the distance between the center and the limits of the y-axis).</p>
<p>If numeric, <code>sb_pos</code> explicitly sets positioning of the segment (not the text).
The text is automatically lifted such that it hovers over the segment. If this
does not work or you want to manipulate the text positioning you can use arguments
<code>text_nudge_x</code> and <code>text_nudge_y</code> or set the position precisely with <code>text_pos</code>.</p>
    </div>
    <div id="distance-measures">
    <h2>Distance measures</h2>



<p>The vignette on distance measures in SPATA2 has been replaced. Click
<code><a href="concept_distance_measure.html">here</a></code> to read it.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://themilolab.com/" class="external-link">SPATA2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">object</span> <span class="op">&lt;-</span> <span class="fu"><a href="loadExampleObject.html">loadExampleObject</a></span><span class="op">(</span><span class="st">"UKF275T"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">object</span> <span class="op">&lt;-</span></span>
<span> <span class="fu"><a href="createNumericAnnotations.html">createNumericAnnotations</a></span><span class="op">(</span></span>
<span>   object <span class="op">=</span> <span class="va">object</span>,</span>
<span>   variable <span class="op">=</span> <span class="st">"HM_HYPOXIA"</span>,</span>
<span>   threshold <span class="op">=</span> <span class="st">"kmeans_high"</span>,</span>
<span>   id <span class="op">=</span> <span class="st">"hypoxia_ann"</span>,</span>
<span>   force1 <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>   <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="plotSurface.html">plotSurface</a></span><span class="op">(</span><span class="va">object</span>, color_by <span class="op">=</span> <span class="st">"HM_HYPOXIA"</span>, outline <span class="op">=</span> <span class="cn">T</span>, pt_clrsp <span class="op">=</span> <span class="st">"Reds 3"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu"><a href="ggpLayerHorizonSAS.html">ggpLayerHorizonSAS</a></span><span class="op">(</span><span class="va">object</span>, id <span class="op">=</span> <span class="st">"hypoxia_ann"</span>, distance <span class="op">=</span> <span class="st">"3mm"</span><span class="op">)</span> <span class="op">+</span></span>
<span> <span class="fu">ggpLayerScaleBarSI</span><span class="op">(</span><span class="va">object</span>, sb_pos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"3mm"</span>, <span class="st">"2mm"</span><span class="op">)</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jan Kueckelhaus, Dieter-Henrik Heiland.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

